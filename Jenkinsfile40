pipeline {
agent any
tools{

maven 'maven-3.9'

}
stages{
    stage('build jar'){
        steps{

echo "building jar file ..."
sh 'mvn package'
    }
    }

stage('build images')
{
    steps{
echo "building docker image ..."
withCredentials([usernamePassword(credentialsId:'DockerHub',passwordVariable:'PASSWORD',usernameVariable : 'USER' )])
{
        sh 'docker build -t omaraboarab/jmvn:Jmvn-2.0 .'
        sh "echo $PASSWORD | docker login -u $USER --password-stdin"
        sh 'docker push omaraboarab/jmvn:Jmvn-2.0'
}
    }
}
stage('Deploy app'){
    steps{

echo "Start Deploying app"
    
    }
}
}
}
